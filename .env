# ThingsBoard Database Migration Configuration
# Edit this file with your database settings

# PostgreSQL Configuration
POSTGRES_TYPE="standalone"  # "standalone" or "docker"
POSTGRES_HOST="localhost"
POSTGRES_PORT="5432"
POSTGRES_DB="thingsboard"
POSTGRES_USER="postgres"
POSTGRES_PASSWORD="your_password_here"

# For Docker PostgreSQL
POSTGRES_CONTAINER_NAME="postgres_container"  # Only used if POSTGRES_TYPE=docker

# Cassandra Configuration
CASSANDRA_TYPE="standalone"  # "standalone" or "docker"
CASSANDRA_HOST="localhost"
CASSANDRA_PORT="9042"
CASSANDRA_KEYSPACE="thingsboard"
CASSANDRA_USERNAME="cassandra"
CASSANDRA_PASSWORD="cassandra"

# For Docker Cassandra
CASSANDRA_CONTAINER_NAME="cassandra_container"  # Only used if CASSANDRA_TYPE=docker

# Migration Settings
DUMP_DIR="/tmp/migration_dumps"
MIGRATION_DIR="/tmp/migration_output"
MIGRATOR_JAR="./target/database-migrator-1.0-SNAPSHOT-jar-with-dependencies.jar"

# Optional: Docker image for migrator (if you want to run migrator in Docker)
# Leave empty to run locally, or set to your Docker image
MIGRATOR_DOCKER_IMAGE=""  # e.g., "yourusername/database-migrator:latest"

# Migration Parameters
CAST_ENABLE="false"
PARTITIONING="MONTHS"
LINES_TO_SKIP="0"

# Custom table filtering (optional)
# Set to true if you want to migrate only specific data
USE_CUSTOM_TABLES="false"
CUSTOM_TABLE_FILTER="ts_kv_dictionary.key in ('temperature', 'humidity') and device_profile.name in ('default')"

# Example configurations:
#
# For Standalone PostgreSQL + Standalone Cassandra:
#   POSTGRES_TYPE="standalone"
#   CASSANDRA_TYPE="standalone" 
#   (set appropriate hosts and credentials above)
#
# For Docker PostgreSQL + Docker Cassandra:
#   POSTGRES_TYPE="docker"
#   POSTGRES_CONTAINER_NAME="my_postgres"
#   CASSANDRA_TYPE="docker"  
#   CASSANDRA_CONTAINER_NAME="my_cassandra"
#
# To run migrator in Docker:
#   MIGRATOR_DOCKER_IMAGE="yourusername/database-migrator:latest"
#
